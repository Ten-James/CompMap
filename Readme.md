# CompileMapper (TenJames.CompMap)

> CompMap is a C# Roslyn-based source generator that automatically creates mapping methods between classes. It simplifies the process of converting one class type to another by generating the necessary code at compile time.

Ensure your DTO's are correctly mapped with compile time safety, to ensure valid changes are tracked in your project.

```csharp
//generated UserReadDto.g.cs
// <auto-generated/>
using System;
using System.Collections.Generic;

using TenJames.CompMap.Mappper;

namespace TenJames.CompMap.Example;

partial class UserReadDto
{

    ///<summary>
    /// The following properties were not mapped because they do not exist in the target class
    ///</summary>
    internal class UserUnmappedProperties
    {
        /// <summary>
        /// Found at /Entitities.cs at 29
        /// </summary>
        public required string Title { get; set; }
    }

    private static partial UserUnmappedProperties GetUserUnmappedProperties(IMapper mapper,  User source);

    /// <summary>
    /// Mapping method generated by TenJames.CompMap
    /// </summary>
    public static UserReadDto MapFrom(IMapper mapper, User source)
    {
        // Note: Some properties were not mapped due to missing counterparts in the target class.
        var unmapped = GetUserUnmappedProperties(mapper, source);
        return new UserReadDto
        {
            Id = source.Id,
a            Name = source.Name,
            Guid = source.Guid,
            Documents = mapper.Map<ICollection<DocumentDto> >(source.Documents),
            Title = unmapped.Title,
        };
    }
}


```

Which can be generated simply from:


```csharp
using TenJames.CompMap.Attributes;

// Entity

public class User {
    public int Id { get; set; }
    public string Name { get; set; }
    public Guid Guid { get; set; }
    public ICollection<Document> Documents { get; set; }
}

// DTOs

[MapFrom(typeof(User))]
public partial class UserReadDto {
    public int Id { get; set; }
    public string Name { get; set; }
    public Guid Guid { get; set; }
    public required string Title { get; set; }
    public ICollection<DocumentDto> Documents { get; set; }

    //Compile time ensurence of type safety
    private static partial UserUnmappedProperties GetUserUnmappedProperties(IMapper mapper, User source)
    {
        return new UserUnmappedProperties()
        {
            // All using Easy to use Mapping methods
            Title = source.Name + "'s Title",
        };
    }
}

```

## Getting started

Install the **TenJames.CompMap** package via NuGet:

```shell
dotnet add package TenJames.CompMap
```
Ensure its correclty referenced in your project file:

```xml
<ProjectReference 
    Include="TenJames.CompMap" 
    Version="0.0.2" 
    ReferenceOutputAssembly="false" 
    OutputItemType="Analyzer" 
/>
```

### Component registration

If you are using dependency injection, register the mapping services in your DI container:

```csharp
using TenJames.CompMap.Mapper;

...

// Feel free to try with Extending BaseMap for custom mapping logic
services.AddTransient<IMapper, BaseMap>();
```

### Usage

Add Attributes to your DTO classes and then enjoy the generated mapping methods :)


